stages:
  - build
  - test
  - deploy

image: php:8.2

before_script:
  - apt-get update && apt-get install -y unzip git curl libzip-dev zlib1g-dev pkg-config libssl-dev
  - pecl install mongodb
  - docker-php-ext-enable mongodb
  - curl -sS https://getcomposer.org/installer | php
  - mv composer.phar /usr/local/bin/composer

build_app:
  stage: build
  script:
    - echo "ðŸ“¦ Installing PHP dependencies"
    - cd backend
    - composer install
    - cd ..
    - echo "âœ… Build done"

test_app:
  stage: test
  script:
    - echo "ðŸ§ª No tests yet"
    - echo "âœ… Test stage passed"

deploy_app:
  stage: deploy
  script:
    - echo "ðŸš€ Deployment step (optional)"
  only:
    - tags
